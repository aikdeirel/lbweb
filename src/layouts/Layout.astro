---
import "../styles/shared.css";

interface Props {
	title: string;
}

const { title } = Astro.props;
const url = new URL(Astro.request.url);
const pathname = url.pathname;
const searchParams = url.searchParams.toString();
const fullPath = searchParams ? `${pathname}?${searchParams}` : pathname;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />
		<link
			rel="icon"
			type="image/png"
			sizes="32x32"
			href="/favicon-32x32.png"
		/>
		<link
			rel="icon"
			type="image/png"
			sizes="16x16"
			href="/favicon-16x16.png"
		/>
		<link
			rel="apple-touch-icon"
			sizes="180x180"
			href="/apple-touch-icon.png"
		/>
		<link rel="manifest" href="/site.webmanifest" />
		<meta name="generator" content={Astro.generator} />
		<title>{title} - Liquid Barbed Wire</title>
	</head>
	<body>
		<nav class="nav">
			<div class="mobile-nav">
				<button class="btn--menu" aria-label="Toggle navigation menu">
					<span class="hamburger"></span>
				</button>
				<a href="/" class="site-title">Liquid Barbed Wire</a>
			</div>
			<div class="nav-links">
				<a
					href="/"
					class={`nav-link ${pathname === "/" ? "nav-link--active" : ""}`}
					>Home</a
				>
				<a
					href="/news"
					class={`nav-link ${pathname === "/news" ? "nav-link--active" : ""}`}
					>News</a
				>
				<a
					href="/about"
					class={`nav-link ${pathname === "/about" ? "nav-link--active" : ""}`}
					>About</a
				>
				<a
					href="/noise"
					class={`nav-link ${pathname === "/noise" ? "nav-link--active" : ""}`}
					>Noise</a
				>
				<a
					href="/visual"
					class={`nav-link ${pathname === "/visual" ? "nav-link--active" : ""}`}
					>Visual</a
				>
				<a
					href="/pit"
					class={`nav-link ${pathname === "/pit" ? "nav-link--active" : ""}`}
					>Pit</a
				>
				<a
					href="/interlace"
					class={`nav-link ${pathname === "/interlace" ? "nav-link--active" : ""}`}
					>Interlace</a
				>
				<a
					href="/impressum"
					class={`nav-link ${pathname === "/impressum" ? "nav-link--active" : ""}`}
					>Impressum</a
				>
				<a
					href="https://liquidbarbedwire.bandcamp.com"
					target="_blank"
					class="nav-link">Bandcamp</a
				>
			</div>
		</nav>
		<main class="main">
			<slot />
		</main>
		<footer class="footer"></footer>
	</body>
</html>

<style>
	:root {
		--text-color: rgb(212, 212, 212);
		--background-color: #1e1e1e;
		--accent-color: rgb(212, 212, 212);
		--spacing-xs: 0.5rem;
		--spacing-sm: 1rem;
		--spacing-md: 2rem;
		--spacing-lg: 3rem;
		--font-size-base: 1rem;
		--font-size-lg: 1.25rem;
		--font-size-xl: 2rem;
		--font-size-2xl: 2.5rem;
	}

	html {
		position: relative;
		background-color: var(--background-color);
		color: var(--text-color);
		letter-spacing: -0.03em;
		font-size: var(--font-size-base);
		line-height: 1.6;
		min-height: 100%;
	}

	html::before {
		content: "";
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-image: url("https://lbweb.fra1.cdn.digitaloceanspaces.com/bg/stonenoise.png");
		background-size: cover;
		background-position: center;
		background-repeat: repeat;
		opacity: 0.4;
		z-index: -1;
		pointer-events: none;
	}

	/* Global link styles */
	:global(a:not(.site-title)) {
		color: var(--text-color);
		text-decoration: underline;
	}

	:global(a:not(.site-title):visited) {
		color: var(--text-color);
	}

	body {
		margin: 0;
		min-height: 100vh;
		display: flex;
		flex-direction: column;
	}

	.nav {
		padding: var(--spacing-sm);
		border-bottom: 1px solid var(--text-color);
	}

	.main {
		flex: 1;
		padding: var(--spacing-md);
		max-width: 1200px;
		margin: 0 auto;
		width: 100%;
		box-sizing: border-box;
	}

	.footer {
		padding: var(--spacing-sm);
		text-align: center;
		border-top: 1px solid var(--text-color);
	}

	.footer a {
		color: var(--text-color);
		text-decoration: underline;
	}

	.footer a:hover {
		opacity: 0.7;
	}
</style>

<script>
	import { initializeApp } from "../utils/dom";
	initializeApp();
</script>
