---
import FullscreenImage from '../components/FullscreenImage.astro';

interface Props {
	title: string;
}

const { title } = Astro.props;
const url = new URL(Astro.request.url);
const pathname = url.pathname;
const searchParams = url.searchParams.toString();
const fullPath = searchParams ? `${pathname}?${searchParams}` : pathname;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/x-icon" href="/favicon.ico">
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
		<link rel="manifest" href="/site.webmanifest">
		<meta name="generator" content={Astro.generator} />
		<title>{title} - Liquid Barbed Wire</title>
	</head>
	<body>
		<nav>
			<div class="mobile-nav">
				<button class="menu-toggle" aria-label="Toggle navigation menu">
					<span class="hamburger"></span>
				</button>
				<a href="/" class="site-title">Liquid Barbed Wire</a>
			</div>
			<div class="nav-links">
				<a href="/" class={pathname === "/" ? "active" : ""}>Home</a>
				<a href="/news" class={pathname === "/news" ? "active" : ""}>News</a>
				<a href="/about" class={pathname === "/about" ? "active" : ""}>About</a>
				<a href="/noise" class={pathname === "/noise" ? "active" : ""}>Noise</a>
				<a href="/visual" class={pathname === "/visual" ? "active" : ""}>Visual</a>
				<a href="/pit" class={pathname === "/pit" ? "active" : ""}>Pit</a>
				<a href="/interlace" class={pathname === "/interlace" ? "active" : ""}>Interlace</a>
				<a href="/impressum" class={pathname === "/impressum" ? "active" : ""}>Impressum</a>
				<a href="https://liquidbarbedwire.bandcamp.com" target="_blank">Bandcamp</a>
			</div>
		</nav>
		<main>
			<slot />
		</main>
		<footer>
		</footer>
		<FullscreenImage />
	</body>
</html>

<style>
	:root {
		--text-color: rgb(212, 212, 212);
		--background-color: #1e1e1e;
		--accent-color: rgb(212, 212, 212);
		--spacing-xs: 0.5rem;
		--spacing-sm: 1rem;
		--spacing-md: 2rem;
		--spacing-lg: 3rem;
		--font-size-base: 1rem;
		--font-size-lg: 1.25rem;
		--font-size-xl: 2rem;
		--font-size-2xl: 2.5rem;
	}

	html {
		font-family: "Courier Prime", "Lucida Console", "Courier New", monospace;
		position: relative;
		background-color: var(--background-color);
		color: var(--text-color);
		letter-spacing: -0.03em;
		font-size: var(--font-size-base);
		line-height: 1.6;
		min-height: 100%;
	}

	html::before {
		content: '';
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-image: url('https://lbweb.fra1.cdn.digitaloceanspaces.com/bg/stonenoise.png');
		background-size: cover;
		background-position: center;
		background-repeat: repeat;
		opacity: 0.4;
		z-index: -1;
		pointer-events: none;
	}

	/* Global link styles */
	:global(a:not(.site-title)) {
		color: var(--text-color);
		text-decoration: underline;
	}

	:global(a:visited) {
		color: var(--text-color);
	}

	body {
		margin: 0;
		min-height: 100vh;
		display: flex;
		flex-direction: column;
	}

	nav {
		padding: var(--spacing-sm);
		border-bottom: 1px solid var(--text-color);
	}

	.nav-links {
		display: flex;
		gap: var(--spacing-md);
		flex-wrap: wrap;
	}

	nav a {
		color: var(--text-color);
		text-decoration: underline;
		text-transform: lowercase;
	}

	nav a:hover, nav a.active {
		opacity: 0.7;
	}

	main {
		flex: 1;
		padding: var(--spacing-md);
		max-width: 1200px;
		margin: 0 auto;
		width: 100%;
		box-sizing: border-box;
	}

	footer {
		padding: var(--spacing-sm);
		text-align: center;
		border-top: 1px solid var(--text-color);
	}

	footer a {
		color: var(--text-color);
		text-decoration: underline;
	}

	footer a:hover {
		opacity: 0.7;
	}

	.menu-toggle {
		display: none;
		background: none;
		border: none;
		cursor: pointer;
		padding: 0.5rem;
	}

	.hamburger {
		display: block;
		width: 24px;
		height: 2px;
		background: var(--text-color);
		position: relative;
		transition: background 0.2s;
	}

	.hamburger::before,
	.hamburger::after {
		content: '';
		position: absolute;
		left: 0;
		width: 100%;
		height: 2px;
		background: var(--text-color);
		transition: transform 0.2s;
	}

	.hamburger::before {
		top: -6px;
	}

	.hamburger::after {
		bottom: -6px;
	}

	.mobile-nav {
		display: none;
		align-items: center;
		gap: var(--spacing-sm);
	}

	.site-title {
		font-size: var(--font-size-lg);
		text-decoration: none;
	}

	.mobile-nav .site-title {
		font-size: var(--font-size-lg);
		text-decoration: none !important;
	}

	@media (max-width: 768px) {
		.mobile-nav {
			display: flex;
		}

		.menu-toggle {
			display: block;
		}

		.nav-links {
			display: none;
			width: 100%;
			flex-direction: column;
			gap: 1rem;
			padding: 1rem 0;
		}

		.nav-links.active {
			display: flex;
		}

		nav.menu-open .hamburger {
			background: transparent;
		}

		nav.menu-open .hamburger::before {
			transform: translateY(6px) rotate(45deg);
		}

		nav.menu-open .hamburger::after {
			transform: translateY(-6px) rotate(-45deg);
		}
	}
</style>

<script>
	const menuToggle = document.querySelector('.menu-toggle');
	const nav = document.querySelector('nav');
	const navLinks = document.querySelector('.nav-links');

	menuToggle?.addEventListener('click', () => {
		nav?.classList.toggle('menu-open');
		navLinks?.classList.toggle('active');
	});
</script>
